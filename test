local function deepcopy(obj)
    if type(obj) ~= "table" then return obj end
    local res = {}
    for k,v in pairs(obj) do res[k] = deepcopy(v) end
    return res
end

-- Before logging:
local safeRequests = {}
for _, req in ipairs(allRequests) do
    table.insert(safeRequests, deepcopy(req))
end

local f = fs.open(LOG_FILE, "w")
f.write(textutils.serializeJSON(safeRequests, true))
f.close()
