-- Wrap peripherals
local me_bridge = peripheral.find("meBridge")
if not me_bridge then error("No ME Bridge found!") end

local chest = peripheral.find("minecraft:chest") or peripheral.find("minecraft:barrel")
if not chest then error("No chest or barrel detected!") end

-- Function to auto-detect output side for the chest
local function pushToChest(itemName, count)
    local sides = {"top","bottom","left","right","front","back"}
    for _, side in ipairs(sides) do
        local ok, result = pcall(function()
            return me_bridge.exportItem({name=itemName, count=count}, side)
        end)
        if ok and type(result) == "number" and result > 0 then
            print("Exported " .. result .. " x " .. itemName .. " to side " .. side)
            return result
        end
    end
    print("Failed to export " .. itemName)
    return 0
end

-- Example: Push 10 cobblestone from AE2 into chest
pushToChest("minecraft:cobblestone", 10)
