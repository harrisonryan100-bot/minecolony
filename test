-- Wrap source and destination
local source = peripheral.wrap("top")       -- the barrel/chest with items
local destination = peripheral.wrap("back") -- the chest you want to move items into

if not source then error("Source inventory not found!") end
if not destination then error("Destination chest not found!") end

-- Move items
for slot = 1, source.size() do
    local stack = source.getItemDetail(slot)
    if stack then
        local countMoved = destination.pullItem(peripheral.getName(source), slot, stack.count)
        print("Moved " .. (countMoved or 0) .. " x " .. stack.name)
    end
end
