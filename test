print("=== Peripheral Check ===")

local meBridge = peripheral.wrap("bottom")
local colony = peripheral.wrap("top")

if meBridge then
    print("ME Bridge detected on bottom")
    print("Available functions:")
    for k,v in pairs(meBridge) do if type(v)=="function" then print("  "..k) end end

    local itemsFunc = meBridge.getItems or meBridge.getItemList
    if itemsFunc then
        local items = itemsFunc()
        print("Items in AE2:", #items)
        for i=1, math.min(5,#items) do
            print(string.format("  %dx %s", items[i].count or 0, items[i].name or "unknown"))
        end
    else
        print("No function to list items available")
    end
else
    print("ME Bridge not detected on bottom")
end

if colony then
    print("Colony Integrator detected on top")
    local requests = colony.getRequests() or {}
    print("Requests found:", #requests)
    for i=1, math.min(5,#requests) do
        local r = requests[i]
        local name = r.items and r.items[1] and r.items[1].name or "unknown"
        print(string.format("  %s x%d -> %s", name, r.count or 0, r.target or "unknown"))
    end
else
    print("Colony Integrator not detected on top")
end
